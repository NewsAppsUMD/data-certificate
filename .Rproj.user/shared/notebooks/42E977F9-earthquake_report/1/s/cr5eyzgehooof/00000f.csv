"0","# Read the earthquake data"
"0","all_earthquakes <- read_csv(""earthquakes.csv"", show_col_types = FALSE)"
"0",""
"0","# Define time periods"
"0","week_ago <- now() - weeks(1)"
"0","two_weeks_ago <- now() - weeks(2)"
"0",""
"0","# Count earthquakes in each period"
"0","recent_week <- all_earthquakes |>"
"0","  filter(time >= week_ago & time < now()) |>"
"0","  nrow()"
"0",""
"0","previous_week <- all_earthquakes |>"
"0","  filter(time >= two_weeks_ago & time < week_ago) |>"
"0","  nrow()"
"0",""
"0","# Calculate percentage change"
"0","pct_change <- ((recent_week - previous_week) / previous_week) * 100"
"0",""
"0","# Categorize earthquakes by intensity"
"0","earthquakes_categorized <- all_earthquakes |>"
"0","  filter(time >= (now() - months(1))) |>"
"0","  mutate("
"0","    intensity = case_when("
"0","      mag < 2.0 ~ ""Micro"","
"0","      mag < 4.0 ~ ""Minor"","
"0","      mag < 5.0 ~ ""Light"","
"0","      mag < 6.0 ~ ""Moderate"","
"0","      mag < 7.0 ~ ""Strong"","
"0","      mag < 8.0 ~ ""Major"","
"0","      mag >= 8.0 ~ ""Great"","
"0","      TRUE ~ ""Unknown"""
"0","    )"
"0","  )"
"0",""
"0","# Count by category"
"0","intensity_counts <- earthquakes_categorized |>"
"0","  count(intensity, sort = TRUE) |>"
"0","  mutate(percentage = round(n / sum(n) * 100, 1))"
